<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get User Location</title>
</head>
<body>

    <button onclick="getUserLocation()">Get My Location</button>
    
    <p id="status"></p>
    <p id="map-link"></p>

    <script>
        function getUserLocation() {
            const status = document.querySelector('#status');
            const mapLink = document.querySelector('#map-link');

            mapLink.href = '';
            mapLink.textContent = '';

            // 1. Check if the browser supports Geolocation
            if (!navigator.geolocation) {
                status.textContent = 'Geolocation is not supported by your browser';
            } else {
                status.textContent = 'Locating...';
                
                // 2. Request the location
                navigator.geolocation.getCurrentPosition(success, error, options);
            }
        }

        // 3. Configuration for High Accuracy
        const options = {
            enableHighAccuracy: true, // Request GPS if available
            timeout: 10000,           // Time to wait before error (10 sec)
            maximumAge: 0             // Do not use a cached position
        };

        // 4. Success Callback
        function success(position) {
            const latitude  = position.coords.latitude;
            const longitude = position.coords.longitude;
            const accuracy  = position.coords.accuracy; // Accuracy in meters

            const status = document.querySelector('#status');
            const mapLink = document.querySelector('#map-link');
            

            status.textContent = `Latitude: ${latitude} °, Longitude: ${longitude} ° (Accuracy: within ${accuracy} meters)`;

            // Create a link to Google Maps
            mapLink.href = `https://www.google.com/maps?q=${latitude},${longitude}`;
            mapLink.textContent = 'View on Google Maps';
        }

        // 5. Error Callback
        function error(err) {
            const status = document.querySelector('#status');
            
            switch(err.code) {
                case err.PERMISSION_DENIED:
                    status.textContent = "User denied the request for Geolocation.";
                    break;
                case err.POSITION_UNAVAILABLE:
                    status.textContent = "Location information is unavailable.";
                    break;
                case err.TIMEOUT:
                    status.textContent = "The request to get user location timed out.";
                    break;
                case err.UNKNOWN_ERROR:
                    status.textContent = "An unknown error occurred.";
                    break;
            }
        }
    </script>
</body>
</html>
